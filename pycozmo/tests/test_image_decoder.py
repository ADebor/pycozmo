
import unittest

from pycozmo.image_encoder import ImageDecoder, image_to_str
from pycozmo.util import hex_load


# noinspection PyPep8
class TestImageDecoder(unittest.TestCase):

    @staticmethod
    def _decode(seq):
        if isinstance(seq, str):
            buffer = hex_load(seq)
        else:
            buffer = bytes(seq)
        decoder = ImageDecoder(buffer)
        decoder.decode()
        return decoder

    def _compare(self, expected, decoder):
        actual = image_to_str(decoder.image)
        self.assertEqual(expected.strip(), actual.strip())

    def test_blank(self):
        seq = "3f:3f"
        expected = """
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
"""
        decoder = self._decode(seq)
        self._compare(expected, decoder)
        self.assertEqual(128, decoder.x)
        self.assertEqual(0, decoder.y)

    def test_fill_screen(self):
        seq = "fd:7f:7e"
        # FIXME: Is this the expected value?
        expected = """
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
................................................................................................................................
"""
        decoder = self._decode(seq)
        self._compare(expected, decoder)
        self.assertEqual(128, decoder.x)
        self.assertEqual(0, decoder.y)

    def test_top_left(self):
        seq = "81:3f:3e"
        expected = """
1...............................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
"""
        decoder = self._decode(seq)
        self._compare(expected, decoder)

    def test_top_left_5(self):
        seq = "03:81:3f:3a"
        expected = """
....1...........................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
"""
        decoder = self._decode(seq)
        self._compare(expected, decoder)

    def test_top_left_1_8(self):
        seq = "81:06:81:3f:36"
        expected = """
1.......1.......................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
"""
        decoder = self._decode(seq)
        self._compare(expected, decoder)

    def test_top_left_line(self):
        seq = "81:46:3f:37"
        expected = """
11111111........................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
"""
        decoder = self._decode(seq)
        self._compare(expected, decoder)

    def test_top_line(self):
        seq = "82:7f:7e"
        expected = """
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
"""
        decoder = self._decode(seq)
        self._compare(expected, decoder)

    def test_bottom_line(self):
        seq = "f8:82:7f:7e"
        expected = """
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
"""
        decoder = self._decode(seq)
        self._compare(expected, decoder)

    def test_left_line(self):
        seq = "fe:3f:3e"
        expected = """
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
1...............................................................................................................................
"""
        decoder = self._decode(seq)
        self._compare(expected, decoder)

    def test_right_line(self):
        seq = "3f:3e:fe"
        expected = """
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
...............................................................................................................................1
"""
        decoder = self._decode(seq)
        self._compare(expected, decoder)

    def test_columns(self):
        seq = "fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:" \
              "fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:" \
              "fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:" \
              "fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00:fd:00"
        expected = """
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.
................................................................................................................................
"""
        decoder = self._decode(seq)
        self._compare(expected, decoder)

    def test_rect(self):
        seq = "fe:82:f4:82:7f:7c:fe"
        expected = """
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1..............................................................................................................................1
1..............................................................................................................................1
1..............................................................................................................................1
1..............................................................................................................................1
1..............................................................................................................................1
1..............................................................................................................................1
1..............................................................................................................................1
1..............................................................................................................................1
1..............................................................................................................................1
1..............................................................................................................................1
1..............................................................................................................................1
1..............................................................................................................................1
1..............................................................................................................................1
1..............................................................................................................................1
1..............................................................................................................................1
1..............................................................................................................................1
1..............................................................................................................................1
1..............................................................................................................................1
1..............................................................................................................................1
1..............................................................................................................................1
1..............................................................................................................................1
1..............................................................................................................................1
1..............................................................................................................................1
1..............................................................................................................................1
1..............................................................................................................................1
1..............................................................................................................................1
1..............................................................................................................................1
1..............................................................................................................................1
1..............................................................................................................................1
1..............................................................................................................................1
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
"""
        decoder = self._decode(seq)
        self._compare(expected, decoder)

    def test_rect2(self):
        seq = "00:fe:82:f4:82:7f:7a:fe:00"
        expected = """
.111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.
.1............................................................................................................................1.
.1............................................................................................................................1.
.1............................................................................................................................1.
.1............................................................................................................................1.
.1............................................................................................................................1.
.1............................................................................................................................1.
.1............................................................................................................................1.
.1............................................................................................................................1.
.1............................................................................................................................1.
.1............................................................................................................................1.
.1............................................................................................................................1.
.1............................................................................................................................1.
.1............................................................................................................................1.
.1............................................................................................................................1.
.1............................................................................................................................1.
.1............................................................................................................................1.
.1............................................................................................................................1.
.1............................................................................................................................1.
.1............................................................................................................................1.
.1............................................................................................................................1.
.1............................................................................................................................1.
.1............................................................................................................................1.
.1............................................................................................................................1.
.1............................................................................................................................1.
.1............................................................................................................................1.
.1............................................................................................................................1.
.1............................................................................................................................1.
.1............................................................................................................................1.
.1............................................................................................................................1.
.1............................................................................................................................1.
.111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.
"""
        decoder = self._decode(seq)
        self._compare(expected, decoder)

    def test_rect3(self):
        seq = "01:80:f6:80:80:82:ec:82:7f:78:80:f6:01"
        expected = """
................................................................................................................................
..1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111..
..1..........................................................................................................................1..
..1..........................................................................................................................1..
..1..........................................................................................................................1..
..1..........................................................................................................................1..
..1..........................................................................................................................1..
..1..........................................................................................................................1..
..1..........................................................................................................................1..
..1..........................................................................................................................1..
..1..........................................................................................................................1..
..1..........................................................................................................................1..
..1..........................................................................................................................1..
..1..........................................................................................................................1..
..1..........................................................................................................................1..
..1..........................................................................................................................1..
..1..........................................................................................................................1..
..1..........................................................................................................................1..
..1..........................................................................................................................1..
..1..........................................................................................................................1..
..1..........................................................................................................................1..
..1..........................................................................................................................1..
..1..........................................................................................................................1..
..1..........................................................................................................................1..
..1..........................................................................................................................1..
..1..........................................................................................................................1..
..1..........................................................................................................................1..
..1..........................................................................................................................1..
..1..........................................................................................................................1..
..1..........................................................................................................................1..
..1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111..
................................................................................................................................
"""
        decoder = self._decode(seq)
        self._compare(expected, decoder)

    def test_rect4(self):
        seq = "fe:82:f4:82:fe:86:ec:86:7f:78:fe:82:f4:82:fe"
        expected = """
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
1.1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.1
1.1..........................................................................................................................1.1
1.1..........................................................................................................................1.1
1.1..........................................................................................................................1.1
1.1..........................................................................................................................1.1
1.1..........................................................................................................................1.1
1.1..........................................................................................................................1.1
1.1..........................................................................................................................1.1
1.1..........................................................................................................................1.1
1.1..........................................................................................................................1.1
1.1..........................................................................................................................1.1
1.1..........................................................................................................................1.1
1.1..........................................................................................................................1.1
1.1..........................................................................................................................1.1
1.1..........................................................................................................................1.1
1.1..........................................................................................................................1.1
1.1..........................................................................................................................1.1
1.1..........................................................................................................................1.1
1.1..........................................................................................................................1.1
1.1..........................................................................................................................1.1
1.1..........................................................................................................................1.1
1.1..........................................................................................................................1.1
1.1..........................................................................................................................1.1
1.1..........................................................................................................................1.1
1.1..........................................................................................................................1.1
1.1..........................................................................................................................1.1
1.1..........................................................................................................................1.1
1.1..........................................................................................................................1.1
1.1..........................................................................................................................1.1
1.1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111.1
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
"""
        decoder = self._decode(seq)
        self._compare(expected, decoder)

    def test_diagonal(self):
        seq = "82:42:80:82:42:84:82:42:88:82:42:8c:82:42:90:82:42:94:82:42:98:82:42:9c:82:42:a0:82:42:a4:82:42:" \
              "a8:82:42:ac:82:42:b0:82:42:b4:82:42:b8:82:42:bc:82:42:c0:82:42:c4:82:42:c8:82:42:cc:82:42:d0:82:" \
              "42:d4:82:42:d8:82:42:dc:82:42:e0:82:42:e4:82:42:e8:82:42:ec:82:42:f0:82:42:f4:82:42:f8:82:42"
        expected = """
1111............................................................................................................................
....1111........................................................................................................................
........1111....................................................................................................................
............1111................................................................................................................
................1111............................................................................................................
....................1111........................................................................................................
........................1111....................................................................................................
............................1111................................................................................................
................................1111............................................................................................
....................................1111........................................................................................
........................................1111....................................................................................
............................................1111................................................................................
................................................1111............................................................................
....................................................1111........................................................................
........................................................1111....................................................................
............................................................1111................................................................
................................................................1111............................................................
....................................................................1111........................................................
........................................................................1111....................................................
............................................................................1111................................................
................................................................................1111............................................
....................................................................................1111........................................
........................................................................................1111....................................
............................................................................................1111................................
................................................................................................1111............................
....................................................................................................1111........................
........................................................................................................1111....................
............................................................................................................1111................
................................................................................................................1111............
....................................................................................................................1111........
........................................................................................................................1111....
............................................................................................................................1111
"""
        decoder = self._decode(seq)
        self._compare(expected, decoder)

    def test_diagonal2(self):
        seq = "f8:82:42:f4:82:42:f0:82:42:ec:82:42:e8:82:42:e4:82:42:e0:82:42:dc:82:42:d8:82:42:d4:82:42:d0:82:" \
              "42:cc:82:42:c8:82:42:c4:82:42:c0:82:42:bc:82:42:b8:82:42:b4:82:42:b0:82:42:ac:82:42:a8:82:42:a4:" \
              "82:42:a0:82:42:9c:82:42:98:82:42:94:82:42:90:82:42:8c:82:42:88:82:42:84:82:42:80:82:42:82:42"
        expected = """
............................................................................................................................1111
........................................................................................................................1111....
....................................................................................................................1111........
................................................................................................................1111............
............................................................................................................1111................
........................................................................................................1111....................
....................................................................................................1111........................
................................................................................................1111............................
............................................................................................1111................................
........................................................................................1111....................................
....................................................................................1111........................................
................................................................................1111............................................
............................................................................1111................................................
........................................................................1111....................................................
....................................................................1111........................................................
................................................................1111............................................................
............................................................1111................................................................
........................................................1111....................................................................
....................................................1111........................................................................
................................................1111............................................................................
............................................1111................................................................................
........................................1111....................................................................................
....................................1111........................................................................................
................................1111............................................................................................
............................1111................................................................................................
........................1111....................................................................................................
....................1111........................................................................................................
................1111............................................................................................................
............1111................................................................................................................
........1111....................................................................................................................
....1111........................................................................................................................
1111............................................................................................................................
"""
        decoder = self._decode(seq)
        self._compare(expected, decoder)

    def test_pycozmo(self):
        seq = bytes([6, 168, 161, 66, 168, 133, 128, 137, 184, 168, 133, 132, 133, 66, 168, 149, 64, 168, 145, 188,
                     172, 141, 188, 172, 137, 192, 176, 129, 64, 176, 133, 192, 176, 141, 136, 133, 164, 176, 145,
                     132, 133, 164, 176, 161, 164, 180, 157, 164, 188, 149, 64, 180, 153, 168, 176, 153, 172, 176,
                     145, 180, 176, 141, 184, 176, 137, 188, 176, 129, 1, 176, 141, 184, 172, 149, 180, 172, 153,
                     176, 168, 157, 176, 168, 141, 128, 137, 176, 168, 137, 136, 137, 172, 168, 133, 140, 137, 172,
                     168, 133, 144, 133, 67, 168, 133, 140, 133, 176, 168, 137, 136, 133, 2, 184, 137, 180, 180,
                     145, 176, 176, 149, 64, 176, 137, 128, 137, 172, 176, 133, 136, 133, 66, 176, 137, 128, 137,
                     172, 176, 149, 64, 180, 145, 176, 184, 137, 1, 176, 133, 136, 133, 172, 176, 133, 132, 137,
                     172, 176, 133, 128, 141, 64, 176, 153, 65, 176, 141, 128, 133, 172, 176, 137, 132, 133, 64,
                     176, 133, 136, 133, 2, 176, 153, 66, 176, 137, 188, 176, 133, 65, 176, 153, 66, 176, 137, 188,
                     176, 133, 65, 176, 153, 65, 180, 149, 2, 184, 137, 180, 180, 145, 176, 176, 149, 64, 176, 137,
                     128, 137, 172, 176, 133, 136, 133, 66, 176, 137, 128, 137, 172, 176, 149, 64, 180, 145, 176,
                     184, 137, 5])
        expected = """
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
.......111111111111......................11111111111............................................................................
.......11111111111111..................1111111111111............................................................................
.......1111.....11111111111....11111..111111.......1.....1111111111....11111111111...1111111111111111111......1111111111........
.......11111....11111..11111..11111...11111.............111111111111...11111111111...11111111111111111111....111111111111.......
.......1111111111111....1111..11111...1111.............11111....11111......111111....11111...11111...1111...11111....11111......
.......11111111111......1111111111....11111............1111......1111....111111......1111....1111....1111...1111......1111......
.......1111..............11111111......111111.....11...11111....11111...111111.......1111....1111....1111...11111....11111......
.......1111...............111111........111111111111....111111111111...11111111111...1111....1111....1111....111111111111.......
.......1111...............111111...........1111111.........111111......11111111111...1111....1111....1111.......111111..........
........................1111111.................................................................................................
........................111111..................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
................................................................................................................................
"""
        decoder = self._decode(seq)
        self._compare(expected, decoder)
